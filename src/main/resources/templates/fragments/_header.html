<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
<meta charset="UTF-8" />
</head>
<body>
	<div th:fragment="_header">
		<nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">

			<ol class="navbar-nav" style="width: 35%;">
				<li class="nav-item"><a class="nav-link" th:href="@{/}">Nowości</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/}">O
						nas</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/}">Oferta</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/}">Kontakt</a></li>

			</ol>
			<form class="form-inline" action="/action_page.php"
				style="margin-left: 5%; width: 30%;">
				<input class="form-control mr-sm-2" type="text" placeholder="Search"></input>
				<button class="btn btn-success" type="submit" style="width: 30%;">Search</button>
			</form>
			<ol class="navbar-nav" style="position: relative; left: 50px;">

				<!-- Authenticed -->
				<li class="nav-item">
					<div sec:authorize="isAuthenticated()">
						<button type="button" class="btn btn-success">Koszyk</button>
					</div>
				</li>
				<li>&nbsp;</li>
				<li class="nav-item">
					<div sec:authorize="isAuthenticated()">
						<button type="button" class="btn btn-success"
							onclick="$('#logoutForm').submit();">Wyloguj</button>
					</div>
				</li>
				<li>&nbsp;</li>
				<li class="nav-item">
					<div sec:authorize="hasAuthority('admin_role')">
						<button type="button" class="btn btn-success">Panel
							administratora</button>
					</div>
				</li>
				<!--NOT Authenticed -->
				<li class="nav-item"><div sec:authorize="!isAuthenticated()">
						<button type="button" class="btn btn-success"
							onclick="document.getElementById('id01').style.display='block'"
							style="width: auto;">Login</button>
					</div></li>
				<li>&nbsp;</li>
				<li class="nav-item"><div sec:authorize="!isAuthenticated()">
						<button type="button" class="btn btn-success"
							onclick="document.getElementById('id02').style.display='block'"
							style="width: auto;">Rejestracja</button>
					</div></li>
			</ol>

			<!-- Logout -->
			<form th:action="@{/logout}" method="post" id="logoutForm">
				<input type="hidden" name="${_csrf.parameterName}"
					value="${_csrf.token}" />
			</form>
			<!-- Regestration -->
			<div id="id02" class="modal"
				style="margin: auto; padding: 0; overflow: auto;">

				<form class="modal-content animate" th:action="@{/new}"
					th:object="${userForm}" style="margin: auto;" method="post">
					<div class="imgcontainer">
						<span
							onclick="document.getElementById('id02').style.display='none'"
							class="close" title="Close Modal">&times;</span>
					</div>
					<div class="container" style="margin: auto; padding: 0;">
						<h1>Register</h1>
						<p>Please fill in this form to create an account.</p>
						<hr>
						<label for="userName"><b>Username</b></label> <input type="text"
							placeholder="Enter userName" name="userName" required> <label
							for="email"><b>Email</b></label> <input type="text"
							placeholder="Enter Email" name="email" required> <label
							for="confirmEmail"><b>Confirm Email</b></label> <input
							type="text" placeholder="Confirm email" name="confirmEmail"
							required> <label for="password"><b>Password</b></label> <input
							type="password" placeholder="Enter Password" name="password"
							required> <label for="ConfirmPsw"><b>Repeat
								Password</b></label> <input type="password" placeholder="Repeat Password"
							name="ConfirmPsw" required>
						<hr>
						<p>
							By creating an account you agree to our <a href="#">Terms
								Privacy</a>.
						</p>

						<button type="submit" class="registerbtn">Register</button>
					</div>

					<div class="container signin">
						<p>
							Already have an account? <span
								onclick="document.getElementById('id01').action = link.style.display='none'">Sign
								in </span>.
						</p>
					</div>
				</form>

			</div>



			<!--Login Form -->
			<div id="id01" class="modal"
				style="width: 80%; height: 98%; margin: auto; padding: 0;">
				<form class="modal-content animate" th:action="@{/}"
					th:object="${loginForm}" method="post">
					<div class="imgcontainer">
						<span
							onclick="document.getElementById('id01').style.display='none'"
							style="width: auto;" class="close" title="Close Modal">&times;</span>
					</div>

					<div class="container">

						<label for="userName"> <b>Username</b></label> <input type="text"
							placeholder="Enter Username" id="userName" name="userName"
							required> <label for="password"> <b>Password</b></label>
						<input type="password" placeholder="Enter Password" id="password"
							name="password" required>

						<button type="submit">Login</button>
						<label> <input type="checkbox" checked="checked"
							name="remember"> Remember me
						</label>
						<div th:if="${param.errorLogin != null}"
							class="alert alert-danger">
							<p>Niepoprawne dane do logowania.</p>
						</div>

						<div th:if="${param.logout != null}" class="alert alert-success">
							<p>Zostałeś wylogowany.</p>
						</div>
					</div>

					<div class="container" style="background-color: #f1f1f1">
						<button type="button"
							onclick="document.getElementById('id01').style.display='none'"
							style="width: auto;" class="cancelbtn">Cancel</button>
						<span class="password">Forgot <a href="#">password?</a></span>
					</div>
				</form>
				<div th:if="${param.errorLogin != null}"
							class="alert alert-danger">
							<p>Niepoprawne dane do logowania.</p>
						</div>

						<div th:if="${param.logout != null}" class="alert alert-success">
							<p>Zostałeś wylogowany.</p>
						</div>
			</div>
		</nav>
	</div>
</body>
</html>